{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { ToastContainer, toast } from 'react-toastify';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Navigation from '../components/Navigation';\nimport Form from '../components/Form';\nimport { authSelectors } from '../store/selectors';\nimport { authActions } from '../store/actions';\n\nvar Login = function Login() {\n  _s();\n\n  var router = useRouter();\n  var dispatch = useDispatch();\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      values = _React$useState2[0],\n      setValues = _React$useState2[1];\n\n  var authToken = useSelector(authSelectors.selectAuthToken);\n  var loading = useSelector(authSelectors.selectLoading);\n  var authError = useSelector(authSelectors.selectError);\n  var email = values.email,\n      password = values.password;\n  var onLogin = React.useCallback(function () {\n    dispatch(authActions.login({\n      email: email,\n      password: password\n    }));\n  }, [values, dispatch, authActions]);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    onLogin();\n  };\n\n  var onClear = function onClear() {\n    dispatch(authActions.clearError());\n  };\n\n  React.useEffect(function () {\n    if (authToken && !loading) router.push('/');\n\n    if (authError) {\n      Object.keys(authError).map(function (key) {\n        return authError[key] && toast(authError[key], {\n          type: 'error'\n        });\n      });\n      onClear;\n    }\n  }, [authToken, authError]);\n  React.useEffect(function () {\n    onClear();\n    return function () {\n      return onClear();\n    };\n  }, []);\n  return __jsx(React.Fragment, null, loading ? __jsx(LinearProgress, null) : __jsx(React.Fragment, null, __jsx(ToastContainer, null), __jsx(Navigation, {\n    Title: \"Login\",\n    Links: [{\n      title: 'Home',\n      ref: '/'\n    }]\n  }), __jsx(Form, {\n    Title: \"Account\",\n    ParentState: [values, setValues],\n    SubmitFunction: handleSubmit,\n    Inputs: [{\n      label: 'Email',\n      id: 'email',\n      type: 'email'\n    }, {\n      label: 'Password',\n      id: 'password',\n      type: 'password'\n    }],\n    LowerText: {\n      info: \"Don't have an account?\",\n      link: {\n        name: 'Signup',\n        ref: '/signup'\n      }\n    }\n  })));\n};\n\n_s(Login, \"mqJnUK1jxr383/+GUoDDGp4KZY0=\", false, function () {\n  return [useRouter, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/luisfcaro/programming/semester-project-team-j/pages/login.js"],"names":["React","useDispatch","useSelector","useRouter","ToastContainer","toast","LinearProgress","Navigation","Form","authSelectors","authActions","Login","router","dispatch","useState","values","setValues","authToken","selectAuthToken","loading","selectLoading","authError","selectError","email","password","onLogin","useCallback","login","handleSubmit","e","preventDefault","onClear","clearError","useEffect","push","Object","keys","map","key","type","title","ref","label","id","info","link","name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { ToastContainer, toast } from 'react-toastify';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Navigation from '../components/Navigation';\nimport Form from '../components/Form';\nimport { authSelectors } from '../store/selectors';\nimport { authActions } from '../store/actions';\n\nconst Login = () => {\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const [values, setValues] = React.useState({});\n  const authToken = useSelector(authSelectors.selectAuthToken);\n  const loading = useSelector(authSelectors.selectLoading);\n  const authError = useSelector(authSelectors.selectError);\n  const { email, password } = values;\n\n  const onLogin = React.useCallback(() => {\n    dispatch(authActions.login({ email, password }));\n  }, [values, dispatch, authActions]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onLogin();\n  };\n  const onClear = () => {\n    dispatch(authActions.clearError());\n  };\n\n  React.useEffect(() => {\n    if (authToken && !loading) router.push('/');\n    if (authError) {\n      Object.keys(authError).map(\n        (key) => authError[key] && toast(authError[key], { type: 'error' })\n      );\n      onClear;\n    }\n  }, [authToken, authError]);\n\n  React.useEffect(() => {\n    onClear();\n    return () => onClear();\n  }, []);\n\n  return (\n    <>\n      {loading ? (\n        <LinearProgress />\n      ) : (\n        <>\n          <ToastContainer />\n          <Navigation\n            Title=\"Login\"\n            Links={[\n              {\n                title: 'Home',\n                ref: '/'\n              }\n            ]}\n          />\n\n          <Form\n            Title=\"Account\"\n            ParentState={[values, setValues]}\n            SubmitFunction={handleSubmit}\n            Inputs={[\n              { label: 'Email', id: 'email', type: 'email' },\n              { label: 'Password', id: 'password', type: 'password' }\n            ]}\n            LowerText={{\n              info: \"Don't have an account?\",\n              link: {\n                name: 'Signup',\n                ref: '/signup'\n              }\n            }}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}